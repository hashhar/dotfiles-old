#!/usr/bin/env sh

# Taken from: https://bbs.archlinux.org/viewtopic.php?pid=1586506#p1586506

send()
{
  if [[ -z "$1" ]]; then
    echo "Usage: send host stuff [...]"
    return
  fi
  DEST=$1
  shift
  BYTES=$(du -csb "${@}" | tail -1 | cut -f1)

  tar -cpf - "${@}" | pv -epbrs $BYTES | nc -4q 3 -T throughput $DEST 6502
}

alias recv='nc -4l 6502 | pv -ebr | tar -xvvpf -'
